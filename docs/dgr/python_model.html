<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python Interface &#8212; Intel® Quantum SDK API v1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=45183d27"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running With MPI" href="mpi.html" />
    <link rel="prev" title="Code Samples" href="samples.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="python-interface">
<span id="python-model"></span><h1>Python Interface<a class="headerlink" href="#python-interface" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#python-via-openqasm-2-0" id="id3">Python via OpenQASM 2.0</a></p>
<ul>
<li><p><a class="reference internal" href="#procedure" id="id4">Procedure</a></p>
<ul>
<li><p><a class="reference internal" href="#step-1-write-quantum-programs" id="id5">Step 1: Write quantum programs</a></p></li>
<li><p><a class="reference internal" href="#step-2-write-the-python-script" id="id6">Step 2: Write the Python script</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#compiling-quantum-kernel-to-shared-library-so" id="id7">Compiling <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> to Shared Library (<code class="docutils literal notranslate"><span class="pre">.so</span></code>)</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id8">Procedure</a></p>
<ul>
<li><p><a class="reference internal" href="#step-1-write-quantum-kernel-functions-in-c" id="id9">Step 1: Write <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions in C++</a></p></li>
<li><p><a class="reference internal" href="#step-2-compile-the-source-program-to-so" id="id10">Step 2: Compile the source program to <code class="docutils literal notranslate"><span class="pre">.so</span></code></a></p></li>
<li><p><a class="reference internal" href="#step-3-write-the-python-script-which-calls-the-apis" id="id11">Step 3: Write the Python script which calls the APIs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-get-cbit-values-after-running-quantum-kernel-functions" id="id12">How to get cbit values after running <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions?</a></p></li>
<li><p><a class="reference internal" href="#how-to-get-references-to-qbit-variables-to-pass-to-runtime-apis" id="id13">How to get references to qbit variables to pass to runtime APIs?</a></p></li>
<li><p><a class="reference internal" href="#python-objects-and-the-corresponding-c-objects" id="id14">Python objects and the corresponding C++ objects</a></p></li>
<li><p><a class="reference internal" href="#c-classes-that-can-be-imported" id="id15">C++ classes that can be imported</a></p></li>
<li><p><a class="reference internal" href="#c-functions-that-can-be-imported" id="id16">C++ functions that can be imported</a></p></li>
<li><p><a class="reference internal" href="#usage-examples" id="id17">Usage examples</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-a-custom-backend-with-the-python-interface" id="id18">Using a Custom Backend with the Python Interface</a></p></li>
<li><p><a class="reference internal" href="#known-limitations-of-the-python-interface" id="id19">Known Limitations of the Python Interface</a></p></li>
</ul>
</nav>
<section id="introduction">
<span id="intro-python"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>The Python Interface provides users a way to run the Intel® Quantum SDK using
Python3, through the <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings</span></code> library. There are two modes for interacting with
Python:</p>
<ol class="arabic simple">
<li><p>Write quantum circuits in OpenQASM 2.0 – write a quantum circuit,
and convert that to a .cpp file that has <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions,
compile, and use the <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings</span></code> library to run the <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions
and call APIs, all from within Python.</p></li>
<li><p>Write <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions in C++, compile to a <code class="docutils literal notranslate"><span class="pre">.so</span></code> file, and call
APIs from Python.</p></li>
</ol>
<p>The Python Interface is installed in a virtual environment placed alongside the compiler
in the <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> directory.
To run Python scripts using the <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings</span></code> library, use either</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span><span class="w"> </span>&lt;path<span class="w"> </span>to<span class="w"> </span>Intel<span class="w"> </span>Quantum<span class="w"> </span>SDK&gt;/virtualenv/bin/activate
</pre></div>
</div>
<p>or call the script with <code class="docutils literal notranslate"><span class="pre">python3</span></code> located at</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>&lt;path<span class="w"> </span>to<span class="w"> </span>Intel<span class="w"> </span>Quantum<span class="w"> </span>SDK&gt;/virtualenv/bin/python3
</pre></div>
</div>
</section>
<section id="python-via-openqasm-2-0">
<span id="openqasm-python"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">Python via OpenQASM 2.0</a><a class="headerlink" href="#python-via-openqasm-2-0" title="Link to this heading">¶</a></h2>
<section id="procedure">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Procedure</a><a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h3>
<section id="step-1-write-quantum-programs">
<h4><a class="toc-backref" href="#id5" role="doc-backlink">Step 1: Write quantum programs</a><a class="headerlink" href="#step-1-write-quantum-programs" title="Link to this heading">¶</a></h4>
<p>Using OpenQASM2.0, or alternatively, transpile the Python program into
OpenQASM2.0, with the user’s choice of quantum programming package. As long as the
program can be turned into a <code class="docutils literal notranslate"><span class="pre">.qasm</span></code> file, the Bridge library will be able to
translate it to a C++ source file for the Intel® Quantum SDK.</p>
<p>At the beginning of the Python script, include the following lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">intelqsdk.cbindings</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">loadSdk</span><span class="p">(</span><span class="s2">&quot;/path/to/file.so&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">loadSdk``needs</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">called</span> <span class="pre">before</span> <span class="pre">calling</span> <span class="pre">other</span> <span class="pre">functions</span> <span class="pre">or</span> <span class="pre">creating</span> <span class="pre">objects</span> <span class="pre">from</span>
<span class="pre">``intelqsdk.cbindings</span></code> library.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sdk_name</span></code> is the user-created reference string given to this <code class="docutils literal notranslate"><span class="pre">.so</span></code>
library. Later on, when calling functions from this library or referencing
<code class="docutils literal notranslate"><span class="pre">cbit</span></code>/<code class="docutils literal notranslate"><span class="pre">qbit</span></code> variables, pass this identifier to indicate which library to
use. Users can also access multiple <code class="docutils literal notranslate"><span class="pre">.so</span></code> libraries to call functions
or reference <code class="docutils literal notranslate"><span class="pre">cbit</span></code>/<code class="docutils literal notranslate"><span class="pre">qbit</span></code> variables from each library.</p>
</section>
<section id="step-2-write-the-python-script">
<h4><a class="toc-backref" href="#id6" role="doc-backlink">Step 2: Write the Python script</a><a class="headerlink" href="#step-2-write-the-python-script" title="Link to this heading">¶</a></h4>
<p>First, import several modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">intelqsdk.cbindings</span>
<span class="kn">from</span> <span class="nn">openqasm_bridge.v2</span> <span class="kn">import</span> <span class="n">translate</span>
</pre></div>
</div>
<p>Next, use Bridge to translate the OpenQASM file to C++:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.qasm&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">input_file</span><span class="p">:</span>
    <span class="n">input_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">input_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">translated</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">input_string</span><span class="p">,</span> <span class="n">kernel_name</span><span class="o">=</span><span class="s1">&#39;my_kernel&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.cpp&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">translated</span><span class="p">:</span>
        <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, compile the translated C++ code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">compiler_path</span> <span class="o">=</span> <span class="s2">&quot;&lt;path to Intel Quantum SDK&gt;/intel-quantum-compiler&quot;</span>
<span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">compileProgram</span><span class="p">(</span><span class="n">compiler_path</span><span class="p">,</span> <span class="s2">&quot;example.cpp&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
</pre></div>
</div>
<p>From here, the user can start calling APIs to set up the simulator and run the quantum
program. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iqs_config</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">IqsConfig</span><span class="p">()</span>
<span class="n">iqs_config</span><span class="o">.</span><span class="n">num_qubits</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">iqs_config</span><span class="o">.</span><span class="n">simulation_type</span> <span class="o">=</span> <span class="s2">&quot;noiseless&quot;</span>
<span class="n">iqs_device</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">FullStateSimulator</span><span class="p">(</span><span class="n">iqs_config</span><span class="p">)</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">callCppFunction</span><span class="p">(</span><span class="s2">&quot;my_kernel&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
<span class="n">qbit_ref</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">RefVec</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">qbit_ref</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">QbitRef</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span><span class="o">.</span><span class="n">get_ref</span><span class="p">())</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="n">iqs_device</span><span class="o">.</span><span class="n">getProbabilities</span><span class="p">(</span><span class="n">qbit_ref</span><span class="p">)</span>
<span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">FullStateSimulator</span><span class="o">.</span><span class="n">displayProbabilities</span><span class="p">(</span><span class="n">probabilities</span><span class="p">,</span> <span class="n">qbit_ref</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="compiling-quantum-kernel-to-shared-library-so">
<span id="so-python"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">Compiling <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> to Shared Library (<code class="docutils literal notranslate"><span class="pre">.so</span></code>)</a><a class="headerlink" href="#compiling-quantum-kernel-to-shared-library-so" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Procedure</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<section id="step-1-write-quantum-kernel-functions-in-c">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">Step 1: Write <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions in C++</a><a class="headerlink" href="#step-1-write-quantum-kernel-functions-in-c" title="Link to this heading">¶</a></h4>
<p>Given a C++ source file, <code class="docutils literal notranslate"><span class="pre">quantum_algorithm.cpp</span></code>,</p>
</section>
<section id="step-2-compile-the-source-program-to-so">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">Step 2: Compile the source program to <code class="docutils literal notranslate"><span class="pre">.so</span></code></a><a class="headerlink" href="#step-2-compile-the-source-program-to-so" title="Link to this heading">¶</a></h4>
<p>Compile the source program using the <code class="docutils literal notranslate"><span class="pre">-s</span></code> flag to compile to
<code class="docutils literal notranslate"><span class="pre">&lt;source_program&gt;.so</span></code>. For example,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>&lt;path<span class="w"> </span>to<span class="w"> </span>Intel<span class="w"> </span>Quantum<span class="w"> </span>SDK&gt;/intel-quantum-compiler<span class="w"> </span>-s<span class="w"> </span>quantum_algorithm.cpp
</pre></div>
</div>
<p>Alternatively, in the Python script, compile and load the <code class="docutils literal notranslate"><span class="pre">.so</span></code> file. It is
assumed that the output directory is the same as the directory of the C++ file
when loading the <code class="docutils literal notranslate"><span class="pre">.so</span></code> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">compileProgram</span><span class="p">(</span><span class="s2">&quot;&lt;path to Intel Quantum SDK&gt;/intel-quantum-compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;path/to/cpp_file&quot;</span><span class="p">,</span> <span class="s2">&quot;flags&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="step-3-write-the-python-script-which-calls-the-apis">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Step 3: Write the Python script which calls the APIs</a><a class="headerlink" href="#step-3-write-the-python-script-which-calls-the-apis" title="Link to this heading">¶</a></h4>
<p>Next, set up a simulation device by using the following template:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># number of qubits</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">iqs_config</span> <span class="o">=</span> <span class="n">IqsConfig</span><span class="p">()</span>
<span class="c1"># set the number of qubits for the simulation config</span>
<span class="n">iqs_config</span><span class="o">.</span><span class="n">num_qubits</span> <span class="o">=</span> <span class="n">N</span>
<span class="c1"># choose the type of noise model</span>
<span class="n">iqs_config</span><span class="o">.</span><span class="n">simulation_type</span> <span class="o">=</span> <span class="s2">&quot;noiseless&quot;</span>
<span class="n">iqs_config</span><span class="o">.</span><span class="n">synchronous</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">iqs_device</span> <span class="o">=</span> <span class="n">FullStateSimulator</span><span class="p">(</span><span class="n">iqs_config</span><span class="p">)</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
</pre></div>
</div>
<p>Then, create a Python equivalent of the C++ objects used by <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qids</span> <span class="o">=</span> <span class="n">RefVec</span><span class="p">()</span>
<span class="n">cbits</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">cbits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CbitRef</span><span class="p">(</span><span class="s2">&quot;CReg&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">))</span>
    <span class="n">qids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">QbitRef</span><span class="p">(</span><span class="s2">&quot;QubitReg&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span><span class="o">.</span><span class="n">get_ref</span><span class="p">())</span>
</pre></div>
</div>
<p>Call APIs which form the quantum circuit:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prepare all qubits in the 0 state</span>
<span class="n">callCppFunction</span><span class="p">(</span><span class="s2">&quot;prepZAll&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
<span class="c1"># Apply QFT</span>
<span class="n">callCppFunction</span><span class="p">(</span><span class="s2">&quot;qft&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
<span class="c1"># Apply the inverse of QFT, effectively applying an Identity</span>
<span class="n">callCppFunction</span><span class="p">(</span><span class="s2">&quot;qft_inverse&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>
</pre></div>
</div>
<p>Call APIs to get the probabilities and measurement results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">probs</span> <span class="o">=</span> <span class="n">iqs_device</span><span class="o">.</span><span class="n">getProbabilities</span><span class="p">(</span><span class="n">qids</span><span class="p">)</span>
<span class="n">amplitudes</span> <span class="o">=</span> <span class="n">iqs_device</span><span class="o">.</span><span class="n">getAmplitudes</span><span class="p">(</span><span class="n">qids</span><span class="p">)</span>
<span class="n">callCppFunction</span><span class="p">(</span><span class="s2">&quot;measZAll&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Measurements:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">cbit</span> <span class="ow">in</span> <span class="n">cbits</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cbit</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Probabilities printed with QRT API&quot;</span><span class="p">)</span>
<span class="c1"># Expect to see |0000&gt; to have a probability of 1</span>
<span class="c1"># since an identity has been applied</span>
<span class="n">FullStateSimulator</span><span class="o">.</span><span class="n">displayProbabilities</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">qids</span><span class="p">)</span>

<span class="c1"># Required wait since device is asynchronous</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="how-to-get-cbit-values-after-running-quantum-kernel-functions">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">How to get cbit values after running <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions?</a><a class="headerlink" href="#how-to-get-cbit-values-after-running-quantum-kernel-functions" title="Link to this heading">¶</a></h3>
<p>Create a <code class="docutils literal notranslate"><span class="pre">CbitRef</span></code> object. For example, if there are the following global
variables in the C++ source:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">cbit</span><span class="w"> </span><span class="n">c0</span><span class="p">;</span>
<span class="n">cbit</span><span class="w"> </span><span class="n">c_array</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
</pre></div>
</div>
<p>then in the Python script, declare the following two variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cbit_c0</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">CbitRef</span><span class="p">(</span><span class="s2">&quot;c0&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span>  <span class="c1"># This refers to c0</span>
<span class="n">cbit_c_array</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">CbitRef</span><span class="p">(</span><span class="s2">&quot;c_array&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span> <span class="c1"># This refers to c_array[1]</span>
</pre></div>
</div>
<p>To get the value of <code class="docutils literal notranslate"><span class="pre">cbit</span></code>, call the <code class="docutils literal notranslate"><span class="pre">value()</span></code> function on the <code class="docutils literal notranslate"><span class="pre">CbitRef</span></code>
object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bool_val</span> <span class="o">=</span> <span class="n">cbit_c0</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="c1"># returns a bool representing the value of the cbit</span>
</pre></div>
</div>
</section>
<section id="how-to-get-references-to-qbit-variables-to-pass-to-runtime-apis">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">How to get references to qbit variables to pass to runtime APIs?</a><a class="headerlink" href="#how-to-get-references-to-qbit-variables-to-pass-to-runtime-apis" title="Link to this heading">¶</a></h3>
<p>Create an <code class="docutils literal notranslate"><span class="pre">QbitRef</span></code> object. For example, if there are the following global
variables in the C++ source:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">qbit</span><span class="w"> </span><span class="n">q_array</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="n">qbit</span><span class="w"> </span><span class="n">q0</span><span class="p">;</span>
</pre></div>
</div>
<p>In the Python script, declare the following two variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qbit_q0</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">QbitRef</span><span class="p">(</span><span class="s2">&quot;q0&quot;</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span> <span class="c1"># This refers to q0</span>
<span class="n">qbit_q_array</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">QbitRef</span><span class="p">(</span><span class="s2">&quot;q_array&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sdk_name</span><span class="p">)</span> <span class="c1"># This refers to q_array[2]</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">qbit_q0.get_ref()</span></code> returns an Python object that can be used as a
<code class="docutils literal notranslate"><span class="pre">std::reference_wrapper&lt;qbit&gt;</span></code>.</p>
<p>Alternatively, make a <code class="docutils literal notranslate"><span class="pre">RefVec</span></code> to get a Python object that can be used
as a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::reference_wrapper&lt;qbit&gt;&gt;</span></code>. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">refvec</span> <span class="o">=</span> <span class="n">intelqsdk</span><span class="o">.</span><span class="n">cbindings</span><span class="o">.</span><span class="n">RefVec</span><span class="p">()</span>
<span class="n">refvec</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qbit_q0</span><span class="o">.</span><span class="n">get_ref</span><span class="p">())</span>
<span class="n">refvec</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qbit_q_array</span><span class="o">.</span><span class="n">get_ref</span><span class="p">())</span>
</pre></div>
</div>
<p>Also, <code class="docutils literal notranslate"><span class="pre">qbit_q0.value()</span></code> returns the physical qubit mapped to by this program qubit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">qbit_q0</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="python-objects-and-the-corresponding-c-objects">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Python objects and the corresponding C++ objects</a><a class="headerlink" href="#python-objects-and-the-corresponding-c-objects" title="Link to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DoubleVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span>
<span class="n">ComplexVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span>
<span class="n">SamplesVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span>
<span class="n">SampleVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>
<span class="n">BoolVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span>
<span class="n">IntVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>
<span class="n">RefVec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">reference_wrapper</span><span class="o">&lt;</span><span class="n">qbit</span><span class="o">&gt;&gt;</span>
<span class="n">QssDoubleMap</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">QssMap</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span>
<span class="n">QssComplexMap</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">QssMap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span>
<span class="n">QssIndexVec</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">QssIndex</span><span class="o">&gt;</span>
<span class="n">QssUnsignedIntMap</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">QssMap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="c-classes-that-can-be-imported">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">C++ classes that can be imported</a><a class="headerlink" href="#c-classes-that-can-be-imported" title="Link to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">QRT_ERROR_T</span>
<span class="n">DeviceConfig</span>
<span class="n">IqsConfig</span>
<span class="n">TensorNetworkConfig</span>
<span class="n">ErrSpec1Q</span>
<span class="n">ErrSpec2Q</span>
<span class="n">ErrSpecIdle</span>
<span class="n">ErrorRates</span>
<span class="n">GateTimes</span>
<span class="n">CliffordSimulatorConfig</span>
<span class="n">QssIndex</span>
<span class="n">Device</span>
<span class="n">FullStateSimulator</span>
<span class="n">CustomInterface</span>
<span class="n">TensorNetworkSimulator</span>
<span class="n">CliffordSimulator</span>
</pre></div>
</div>
</section>
<section id="c-functions-that-can-be-imported">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">C++ functions that can be imported</a><a class="headerlink" href="#c-functions-that-can-be-imported" title="Link to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">qssMapToVector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span>
<span class="n">qssMapToVector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span>
<span class="n">qssMapVectorToMap</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span>
<span class="n">qssMapVectorToMap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
</section>
<section id="usage-examples">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Usage examples</a><a class="headerlink" href="#usage-examples" title="Link to this heading">¶</a></h3>
<p>Suppose the user has an instance of <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings.FullStateSimulator</span></code> called
<code class="docutils literal notranslate"><span class="pre">iqs_device</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iqs_device</span><span class="o">.</span><span class="n">getProbabilities</span><span class="p">(</span><span class="n">qids</span><span class="p">)</span> <span class="c1"># returns a DoubleVec</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">getAmplitudes</span><span class="p">(</span><span class="n">qids</span><span class="p">)</span> <span class="c1"># returns a ComplexVec</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">getProbabilities</span><span class="p">(</span><span class="n">qids</span><span class="p">,</span> <span class="n">QssIndexVec</span><span class="p">())</span> <span class="c1"># returns a QssDoubleMap</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">getAmplitudes</span><span class="p">(</span><span class="n">qids</span><span class="p">,</span> <span class="n">QssIndexVec</span><span class="p">())</span> <span class="c1"># returns a QssComplexMap</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">getSamples</span><span class="p">(</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">qids</span><span class="p">)</span> <span class="c1"># returns a SamplesVec</span>
<span class="n">iqs_device</span><span class="o">.</span><span class="n">getSingleQubitProbs</span><span class="p">(</span><span class="n">qids</span><span class="p">)</span> <span class="c1"># returns a DoubleVec</span>
</pre></div>
</div>
<p>Example of using a map from C++:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-- Iterating through a map in C++ gives a (key, value) pair --#</span>
<span class="k">for</span> <span class="n">prob</span> <span class="ow">in</span> <span class="n">iqs_device</span><span class="o">.</span><span class="n">getProbabilities</span><span class="p">(</span><span class="n">qids</span><span class="p">,</span> <span class="n">QssIndexVec</span><span class="p">()):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">prob</span><span class="o">.</span><span class="n">key</span><span class="p">()</span><span class="o">.</span><span class="n">getIndex</span><span class="p">(),</span> <span class="n">prob</span><span class="o">.</span><span class="n">data</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="using-a-custom-backend-with-the-python-interface">
<span id="custom-backend-python"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink">Using a Custom Backend with the Python Interface</a><a class="headerlink" href="#using-a-custom-backend-with-the-python-interface" title="Link to this heading">¶</a></h2>
<p>To use a custom backend with the Python Interface,
create a Python class that derives from the <code class="docutils literal notranslate"><span class="pre">CustomInterface</span></code> class
in the <code class="docutils literal notranslate"><span class="pre">intelqsdk.cbindings</span></code> module. In this class,
implement the <code class="docutils literal notranslate"><span class="pre">RXY</span></code>, <code class="docutils literal notranslate"><span class="pre">RZ</span></code>, <code class="docutils literal notranslate"><span class="pre">SwapA</span></code>, <code class="docutils literal notranslate"><span class="pre">CPhase</span></code>, <code class="docutils literal notranslate"><span class="pre">PrepZ</span></code>, and <code class="docutils literal notranslate"><span class="pre">MeasZ</span></code> methods, and add
a constructor for the Python class.</p>
<p>The following example assumes the user has defined a Python class <code class="docutils literal notranslate"><span class="pre">MySimulator</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">custom_device_id</span> <span class="o">=</span> <span class="s2">&quot;custom device&quot;</span>
<span class="n">CustomSimulator</span><span class="o">.</span><span class="n">registerCustomInterface</span><span class="p">(</span><span class="n">MySimulator</span><span class="p">,</span> <span class="n">custom_device_id</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">//</span> <span class="n">args</span> <span class="ow">is</span> <span class="n">optional</span><span class="p">,</span> <span class="n">depends</span> <span class="n">on</span> <span class="n">MySimulator</span><span class="s1">&#39;s constructor</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">DeviceConfig</span><span class="p">(</span><span class="n">custom_device_id</span><span class="p">)</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">CustomSimulator</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if the user only intends to have one device, use the following shortcut:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">CustomSimulator</span><span class="o">.</span><span class="n">createSimulator</span><span class="p">(</span><span class="n">MySimulator</span><span class="p">,</span> <span class="s2">&quot;custom_device&quot;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note the difference relative to the C++ interface: instead of the class being a template argument of
<code class="docutils literal notranslate"><span class="pre">registerCustomInterface</span></code> and <code class="docutils literal notranslate"><span class="pre">createSimulator</span></code>, it is the first parameter in the Python Interface.</p>
<p>Call the function <code class="docutils literal notranslate"><span class="pre">getCustomBackend()</span></code> to return the class that the user has created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sim_object</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">getCustomBackend</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="known-limitations-of-the-python-interface">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Known Limitations of the Python Interface</a><a class="headerlink" href="#known-limitations-of-the-python-interface" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Any variables of <code class="docutils literal notranslate"><span class="pre">cbit</span></code> type must be global in order to access them.</p></li>
<li><p>The C++ functions, including <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code>, called from Python must
return <code class="docutils literal notranslate"><span class="pre">void</span></code> and either take no parameters or take an single array of
<code class="docutils literal notranslate"><span class="pre">double</span></code>.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Intel® Quantum SDK API</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers Guide and Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="attributions.html">How to Cite</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_to_QC.html">Introduction to Quantum Computing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="usage.html">Using the Intel® Quantum SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="backends.html">Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html">Support and Bug Reporting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fleq/index.html">FLEQ Guide and Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citations.html">Citations</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Developers Guide and Reference</a><ul>
  <li><a href="usage.html">Using the Intel® Quantum SDK</a><ul>
      <li>Previous: <a href="samples.html" title="previous chapter">Code Samples</a></li>
      <li>Next: <a href="mpi.html" title="next chapter">Running With MPI</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024 Intel Corporation. All Rights Reserved.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/dgr/python_model.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>