<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Debugging &#8212; Intel® Quantum SDK API v1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=45183d27"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview of FLEQ compilation" href="compilation-overview.html" />
    <link rel="prev" title="Domain-specific languages using FLEQ" href="dsl.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="debugging">
<span id="debug"></span><h1>Debugging<a class="headerlink" href="#debugging" title="Link to this heading">¶</a></h1>
<p>FLEQ enables higher level of abstraction for quantum programming through quantum
kernel expressions, conditionals, recursion, <code class="docutils literal notranslate"><span class="pre">DataList</span></code> DSLs, and more. With
this higher level of abstraction however, it becomes more difficult to debug
quantum programs that are behaving in unexpected ways. FLEQ supplies several
utilities, most of which have already been introduced, to aid in debugging. This
section provides an overview of how these utilities can be utilized to debug
quantum programs.</p>
<ol class="arabic simple">
<li><p>The functions <code class="docutils literal notranslate"><span class="pre">qexpr::exitAtCompile</span></code> and <code class="docutils literal notranslate"><span class="pre">qexpr::exitAtRuntime</span></code> (see
<a class="reference internal" href="utils.html#exiting"><span class="std std-ref">Exiting</span></a>) should be used liberally to catch improper inputs to quantum
kernel expression functions.</p></li>
<li><p>If a bug arises from a <code class="docutils literal notranslate"><span class="pre">DataList</span></code> argument, or if a user wants to determine
how far in evaluation of a <code class="docutils literal notranslate"><span class="pre">QExpr</span></code> the compiler was able to reach, they can
use <code class="docutils literal notranslate"><span class="pre">qexpr::printDataList()</span></code> (see <a class="reference internal" href="utils.html#printing"><span class="std std-ref">Printing</span></a>) to act like a print
statement during FLEQ evaluation as part of compilation. Users should be
aware that such messages are buffered in a print buffer during compile-time,
and the order of those messages is based on a topological sort of the FLEQ
graph (see <a class="reference internal" href="compilation-overview.html#compilation-overview"><span class="std std-ref">Overview of FLEQ compilation</span></a>), which may not always align with
their intuition.</p></li>
<li><p>If a large quantum kernel expression contains a bug, the function
<code class="docutils literal notranslate"><span class="pre">qexpr::printQuantumLogic()</span></code> (see <a class="reference internal" href="utils.html#printing"><span class="std std-ref">Printing</span></a>) can be used to narrow
down the problem to a sub-expression. In particular,
<code class="docutils literal notranslate"><span class="pre">qexpr::printQuantumLogic()</span></code> will display the PCOAST graph generated by a
particular quantum kernel expression, even if it occurs within a larger
<code class="docutils literal notranslate"><span class="pre">QExpr</span></code>. The PCOAST representation, described in detail in <span id="id1">[<a class="reference internal" href="../citations.html#id5" title="Jennifer Paykin, Albert T. Schmitz, Mohannad Ibrahim, Xin-Chuan Wu, and A. Y. Matsuura. Pcoast: a pauli-based quantum circuit optimization framework. In 2023 IEEE International Conference on Quantum Computing and Engineering (QCE), volume 01, 715-726. 2023. doi:10.1109/QCE57702.2023.00087.">PSI+23</a>]</span>, is
a compact representation of quantum logic, so if a user knows what PCOAST
graph should be represented by a certain subcomponent of their <code class="docutils literal notranslate"><span class="pre">QExpr</span></code>,
they can compare the actual output against the expected output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qexpr::printQuantumLogic()</span></code> can also be used in conjunction with
<code class="docutils literal notranslate"><span class="pre">qexpr::convert&lt;&gt;</span></code> to display the PCOAST graph associated with a quantum
kernel function, even if FLEQ is not being used more broadly.</p></li>
<li><p>Barriers in a quantum kernel expression prevent optimization across
boundaries. Users may want to replace calls to <code class="docutils literal notranslate"><span class="pre">join</span></code> in a <code class="docutils literal notranslate"><span class="pre">QExpr</span></code> with
calls to <code class="docutils literal notranslate"><span class="pre">bind</span></code> (see <a class="reference internal" href="barriers.html#bind"><span class="std std-ref">Barriers and binding</span></a>) to isolate a problem. After the problem
is fixed, they may be able to move back towards using <code class="docutils literal notranslate"><span class="pre">join</span></code>, which results
in a more highly optimized circuit implementation.</p></li>
<li><p>The compiler flag <code class="docutils literal notranslate"><span class="pre">-P</span></code> can be used for debugging quantum kernel
expressions in a similar way as for ordinary <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions. The
<code class="docutils literal notranslate"><span class="pre">-P</span></code> flag prints all fully evaluated quantum kernel expressions (as well as
all <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> functions) to either the console, <code class="docutils literal notranslate"><span class="pre">.tex</span></code> files
compatible with LaTeX, or <code class="docutils literal notranslate"><span class="pre">.json</span></code> files. For quantum kernel expressions,
however, only the fully optimized and synthesized versions of the circuits
will be displayed.</p></li>
<li><p>The compiler flag <code class="docutils literal notranslate"><span class="pre">-v</span></code> prints out statistics for each evaluated quantum kernel
expression and <code class="docutils literal notranslate"><span class="pre">quantum_kernel</span></code> function.</p></li>
<li><p>Users can examine the intermediate LLVM files produced by the
compiler by specifying the compiler flag <code class="docutils literal notranslate"><span class="pre">-k</span></code>. This flag will generate a
number of intermediate files with the <code class="docutils literal notranslate"><span class="pre">.ll</span></code> extension. For the purposes of
FLEQ debugging, the user should examine <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;_lowered.ll</span></code>, which is the
earliest LLVM file generated by <code class="docutils literal notranslate"><span class="pre">-k</span></code> with results of the FLEQ compilation stage.
(<a class="reference internal" href="compilation-overview.html#compilation-overview"><span class="std std-ref">Overview of FLEQ compilation</span></a>).</p></li>
<li><p>Ill-formed uses of <code class="docutils literal notranslate"><span class="pre">DataList</span></code> and <code class="docutils literal notranslate"><span class="pre">QList</span></code> <em>do not</em> cause the compilation to exit,
but do generate warnings which can be seen through the use of command-line flags. See
<a class="reference internal" href="compilation-overview.html#compilation-overview"><span class="std std-ref">Overview of FLEQ compilation</span></a> for details.</p></li>
<li><p>As discussed in <a class="reference internal" href="classical-quantum-ordering.html#classical"><span class="std std-ref">Ordering of classical and quantum operations</span></a>, if classical code is interwoven with quantum kernel expressions,
it is best practice to add the <code class="docutils literal notranslate"><span class="pre">PROTECT</span></code> attribute to avoid premature inlining. This is
especially true if the function introduces local variables.</p></li>
<li><p>In the v1.1 release of the Intel® Quantum SDK, FLEQ is still in beta. Please feel free to
voice any comments, concerns, questions or suggestions to the URL provided in <a class="reference internal" href="support.html#fleq-support"><span class="std std-ref">Support</span></a>.
This feedback is vital to shape FLEQ and maximize its utility for quantum applications developers
and researchers.</p></li>
</ol>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Intel® Quantum SDK API</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dgr/index.html">Developers Guide and Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">FLEQ Guide and Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="advanced.html">Advanced topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citations.html">Citations</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">FLEQ Guide and Reference</a><ul>
  <li><a href="advanced.html">Advanced topics</a><ul>
      <li>Previous: <a href="dsl.html" title="previous chapter">Domain-specific languages using FLEQ</a></li>
      <li>Next: <a href="compilation-overview.html" title="next chapter">Overview of FLEQ compilation</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024 Intel Corporation. All Rights Reserved.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/fleq/debugging.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>